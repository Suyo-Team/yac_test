{"version":3,"sources":["firebase/client.js","hooks/useUser.js","service/auth.service.js","service/chat.service.js","pages/Chat.js","components/auth/SignIn.js","components/auth/SignUp.js","pages/Home.js","App.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","console","log","userState","NOT_KNOWN_USER","undefined","ERROR","LOGGED_USER","useUser","useState","user","setUser","useEffect","onChange","auth","onAuthStateChanged","email","uid","normalizeUser","db","firestore","Chat","history","useHistory","message","setMessage","chats","setChats","loadingMessages","setLoadingMessages","unsubscribe","callback","mss","elem","document","getElementById","scrollTop","scrollHeight","collection","orderBy","onSnapshot","messages","docs","map","doc","data","id","createdAt","toDate","className","onClick","signOut","then","replace","chat","key","toDateString","getHours","getMinutes","onSubmit","evt","preventDefault","Date","add","sendChat","type","placeholder","value","target","SignIn","goToRegister","setEmail","password","setPassword","pass","signInWithEmailAndPassword","signInWithEmailAndPass","catch","err","e","SignUp","goToSignIn","createUserWithEmailAndPassword","signUpWithEmailAndPass","Home","isRegister","setIsRegister","style","height","App","path","component","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ab5cee39.chunk.js","sourcesContent":["import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/firebase-firestore'\n\nlet firebaseConfig = {\n    apiKey: \"AIzaSyDbRK7oimMdTPN8brDWnmBVnKez5kgvExE\",\n    authDomain: \"yactuttodev.firebaseapp.com\",\n    databaseURL: \"https://yactuttodev.firebaseio.com\",\n    projectId: \"yactuttodev\",\n    storageBucket: \"yactuttodev.appspot.com\",\n    messagingSenderId: \"135636956622\",\n    appId: \"1:135636956622:web:23b1be3aefa00a23c4e79f\"\n};\n\nconst app = firebase.initializeApp(firebaseConfig)\nconsole.log('firebase inicializado')\nexport default app","import { useState, useEffect } from 'react'\nimport { onAuthStateChange } from '../service/auth.service'\n\nexport const userState = {\n  NOT_KNOWN_USER: undefined,\n  ERROR: -1,\n  LOGGED_USER: null\n}\n\nexport default function useUser () {\n  const [user, setUser] = useState(userState.NOT_KNOWN_USER)\n\n  useEffect(() => {\n    onAuthStateChange(user => {\n      if(user){\n        setUser(user)\n      }else{\n        setUser(userState.LOGGED_USER)\n      }      \n    })\n  }, [])\n\n  return user\n}\n","import firebase from '../firebase/client'\n\nconst normalizeUser = user => {\n    const { email, uid } = user\n  \n    return {\n      email,\n      uid\n    }\n  }\n\nexport const onAuthStateChange = onChange => {\n    return firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        onChange(normalizeUser(user))\n      } else {\n        onChange(null)\n      }\n    })\n  }\n\nexport const signUpWithEmailAndPass = (email, pass) => {\n    return firebase.auth().createUserWithEmailAndPassword(email, pass)\n}\n\nexport const signInWithEmailAndPass = (email, pass) => {\n  return firebase.auth().signInWithEmailAndPassword(email, pass)\n}\n\nexport const signOut = () => {\n  return firebase.auth().signOut()\n}","import firebase from '../firebase/client'\nconst db = firebase.firestore()\n\nexport const sendChat = (email, message) => {\n    const chat = {\n        email,\n        message,\n        createdAt: new Date()\n    }\n    return db.collection('chats').add(chat)\n}\n\nexport const readChats = (callback) => {\n    db.collection('chats')\n    .orderBy('createdAt', 'asc')\n    .onSnapshot(({docs}) => {\n        const messages = docs.map(doc => {\n            const data = doc.data()\n            const id = doc.id\n            const { createdAt } = data\n\n            return {\n                id,\n                ...data,\n                createdAt: createdAt.toDate()\n            }\n        })\n        callback(messages)\n    })\n}","import React, { useEffect, useState } from 'react'\nimport useUser, { userState } from '../hooks/useUser'\nimport { useHistory } from 'react-router-dom'\nimport { sendChat, readChats } from '../service/chat.service'\nimport { signOut } from '../service/auth.service'\nimport './chat.css'\n\n\nexport default function Chat() {\n\n    const user = useUser()\n    const history = useHistory()\n    const [message, setMessage] = useState('')\n    const [chats, setChats] = useState([])\n    const [loadingMessages, setLoadingMessages] = useState(true)\n\n\n    const onHandleSubmit = evt => {\n        evt.preventDefault()\n        \n        if(message !== ''){\n            sendChat(user.email, message)\n            setMessage('')\n        }\n    }\n\n    useEffect(() => {\n        let unsubscribe\n        if(user){\n            unsubscribe = readChats((mss) => {\n                setChats(mss)\n                setLoadingMessages(false)\n                let elem = document.getElementById('chat-messages')\n                elem.scrollTop = elem.scrollHeight\n            })            \n        }\n        return () => unsubscribe && unsubscribe()\n    }, [user])\n\n    const closeSession = () => {\n        signOut().then(() => {\n            history.replace('/')\n        })\n    }\n\n    return (\n        <>\n            \n            <div className='chat'>\n                <button className='btn btn-primary' onClick={closeSession}>\n                    Sing Out\n                </button>\n                <div>\n                    <div className='chat-messages' id='chat-messages'>\n                        {loadingMessages && <div className='d-flex justify-content-center align-items-center'><div className='spinner-border text-primary'></div></div>}\n                        {chats.map(chat => (\n                            <div className='chat-message' key={chat.id}>\n                                {chat.message}\n                                <small>{`${chat.createdAt.toDateString()} - ${chat.createdAt.getHours()}:${chat.createdAt.getMinutes()}   ${chat.email}`}</small>\n                            </div>\n                        ))}\n                    </div>\n                    <div className='chat-bottom'>\n                        <form onSubmit={onHandleSubmit}>\n                            <input type='text' placeholder='type a message...' value={message} onChange={evt => setMessage(evt.target.value)}/>\n                            <button>></button>\n                        </form>                        \n                    </div>\n                </div>                \n            </div>\n        </>\n    )\n}","import React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { signInWithEmailAndPass } from '../../service/auth.service'\nimport './SignIn.css'\n\nfunction SignIn({ goToRegister }) {\n\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const history = useHistory()\n\n  const onHandleSubmit = evt => {\n    evt.preventDefault()\n    \n    if(email !== '' && password !== ''){\n        signInWithEmailAndPass(email, password).then(() => {\n            history.replace('/chat')\n        })\n        .catch(err => {\n            console.log('error: ' + err)\n        })\n    }    \n  }\n\n  return (\n    <div className=\"app\">\n      <h1>TuttoDev IRC YAC</h1>\n      <h4>SignIn</h4>\n      <form className='login-form' onSubmit={onHandleSubmit}>\n        <input type='text' placeholder='Email' onChange={e => setEmail(e.target.value)} value={email}/>\n        <input type='password' placeholder='Password' onChange={e => setPassword(e.target.value)} value={password}/>\n        <button>Enter IRC</button>\n        <small className='login-form__register' onClick={goToRegister}>Register</small>\n      </form>\n    </div>\n  );\n}\n\nexport default SignIn;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { signUpWithEmailAndPass } from '../../service/auth.service'\nimport './SignIn.css'\n\nfunction SignUp({ goToSignIn }) {\n\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const history = useHistory()\n\n  const onHandleSubmit = evt => {\n    evt.preventDefault()\n\n    if(email !== '' && password !== ''){\n        signUpWithEmailAndPass(email, password).then(() => {\n            history.replace('/chat')\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    }    \n  }\n\n  return (\n    <div className=\"app\">\n      <h1>TuttoDev IRC YAC</h1>\n      <h4>Register</h4>\n      <form className='login-form' onSubmit={onHandleSubmit}>\n        <input type='text' placeholder='Email' onChange={e => setEmail(e.target.value)} value={email}/>\n        <input type='password' placeholder='Password' onChange={e => setPassword(e.target.value)} value={password}/>\n        <button>Register</button>\n        <small className='login-form__register' onClick={goToSignIn}>SignIn</small>\n      </form>\n    </div>\n  );\n}\n\nexport default SignUp;\n","import React, { useState, useEffect } from 'react'\nimport SignIn from '../components/auth/SignIn'\nimport SignUp from '../components/auth/SignUp'\nimport useUser, { userState } from '../hooks/useUser'\nimport { useHistory } from \"react-router-dom\";\n\nexport default function Home () {\n\n    const [isRegister, setIsRegister] = useState(false)\n    const user = useUser()\n    const history = useHistory()\n\n    useEffect(() => {\n        user && history.replace('/chat')\n      }, [user])\n\n    const goToRegister = () => {\n        setIsRegister(true)\n    }\n\n    const goToSignIn = () => {\n        setIsRegister(false)\n    }\n\n    return (\n        <>\n        {user === userState.NOT_KNOWN_USER ? <div className='d-flex justify-content-center align-items-center' style={{height: '100vh'}}><div className='spinner-border text-primary'></div></div> : ''}\n        {\n        user === userState.LOGGED_USER ? \n            (!isRegister ? <SignIn goToRegister={goToRegister}/> : <SignUp goToSignIn={goToSignIn} />)\n            :\n            ''\n        }        \n        </>\n    )\n}","import React from 'react';\nimport Chat from './pages/Chat'\nimport Home from './pages/Home'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom'\n\nfunction App() {\n\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route path=\"/chat\" component={Chat}/>\n          <Route path=\"/\" component={Home} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}