(this.webpackJsonpyac=this.webpackJsonpyac||[]).push([[0],{20:function(e,t,a){},24:function(e,t,a){e.exports=a(42)},29:function(e,t,a){},36:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(21),l=a.n(r),o=(a(29),a(3)),i=a(22),u=a.n(i),s=(a(32),a(34),u.a.initializeApp({apiKey:"AIzaSyDbRK7oimMdTPN8brDWnmBVnKez5kgvExE",authDomain:"yactuttodev.firebaseapp.com",databaseURL:"https://yactuttodev.firebaseio.com",projectId:"yactuttodev",storageBucket:"yactuttodev.appspot.com",messagingSenderId:"135636956622",appId:"1:135636956622:web:23b1be3aefa00a23c4e79f"}));console.log("firebase inicializado");var m=s,f={NOT_KNOWN_USER:void 0,ERROR:-1,LOGGED_USER:null};function d(){var e=Object(n.useState)(f.NOT_KNOWN_USER),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){var e;e=function(e){c(e||f.LOGGED_USER)},m.auth().onAuthStateChanged((function(t){e(t?function(e){return{email:e.email,uid:e.uid}}(t):null)}))}),[]),a}var E=a(1),p=a(16),g=m.firestore();a(36);function v(){var e=d(),t=Object(E.f)(),a=Object(n.useState)(""),r=Object(o.a)(a,2),l=r[0],i=r[1],u=Object(n.useState)([]),s=Object(o.a)(u,2),f=s[0],v=s[1],h=Object(n.useState)(!0),b=Object(o.a)(h,2),O=b[0],j=b[1];Object(n.useEffect)((function(){var t,a;return e&&(a=function(e){v(e),j(!1);var t=document.getElementById("chat-messages");t.scrollTop=t.scrollHeight},t=void g.collection("chats").orderBy("createdAt","asc").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data(),a=e.id,n=t.createdAt;return Object(p.a)(Object(p.a)({id:a},t),{},{createdAt:n.toDate()})}));a(t)}))),function(){return t&&t()}}),[e]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"chat"},c.a.createElement("button",{className:"btn btn-primary",onClick:function(){m.auth().signOut().then((function(){t.replace("/")}))}},"Sing Out"),c.a.createElement("div",null,c.a.createElement("div",{className:"chat-messages",id:"chat-messages"},O&&c.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},c.a.createElement("div",{className:"spinner-border text-primary"})),f.map((function(e){return c.a.createElement("div",{className:"chat-message",key:e.id},e.message,c.a.createElement("small",null,"".concat(e.createdAt.toDateString()," - ").concat(e.createdAt.getHours(),":").concat(e.createdAt.getMinutes(),"   ").concat(e.email)))}))),c.a.createElement("div",{className:"chat-bottom"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),""!==l&&(!function(e,t){var a={email:e,message:t,createdAt:new Date};g.collection("chats").add(a)}(e.email,l),i(""))}},c.a.createElement("input",{type:"text",placeholder:"type a message...",value:l,onChange:function(e){return i(e.target.value)}}),c.a.createElement("button",null,">"))))))}a(20);var h=function(e){var t=e.goToRegister,a=Object(n.useState)(""),r=Object(o.a)(a,2),l=r[0],i=r[1],u=Object(n.useState)(""),s=Object(o.a)(u,2),f=s[0],d=s[1],p=Object(E.f)();return c.a.createElement("div",{className:"app"},c.a.createElement("h1",null,"TuttoDev IRC YAC"),c.a.createElement("h4",null,"SignIn"),c.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),""!==l&&""!==f&&function(e,t){return m.auth().signInWithEmailAndPassword(e,t)}(l,f).then((function(){p.replace("/chat")})).catch((function(e){console.log("error: "+e)}))}},c.a.createElement("input",{type:"text",placeholder:"Email",onChange:function(e){return i(e.target.value)},value:l}),c.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(e){return d(e.target.value)},value:f}),c.a.createElement("button",null,"Enter IRC"),c.a.createElement("small",{className:"login-form__register",onClick:t},"Register")))};var b=function(e){var t=e.goToSignIn,a=Object(n.useState)(""),r=Object(o.a)(a,2),l=r[0],i=r[1],u=Object(n.useState)(""),s=Object(o.a)(u,2),f=s[0],d=s[1],p=Object(E.f)();return c.a.createElement("div",{className:"app"},c.a.createElement("h1",null,"TuttoDev IRC YAC"),c.a.createElement("h4",null,"Register"),c.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),""!==l&&""!==f&&function(e,t){return m.auth().createUserWithEmailAndPassword(e,t)}(l,f).then((function(){p.replace("/chat")})).catch((function(e){console.log(e)}))}},c.a.createElement("input",{type:"text",placeholder:"Email",onChange:function(e){return i(e.target.value)},value:l}),c.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(e){return d(e.target.value)},value:f}),c.a.createElement("button",null,"Register"),c.a.createElement("small",{className:"login-form__register",onClick:t},"SignIn")))};function O(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],l=d(),i=Object(E.f)();Object(n.useEffect)((function(){l&&i.replace("/chat")}),[l]);return c.a.createElement(c.a.Fragment,null,l===f.NOT_KNOWN_USER?c.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"}},c.a.createElement("div",{className:"spinner-border text-primary"})):"",l===f.LOGGED_USER?a?c.a.createElement(b,{goToSignIn:function(){r(!1)}}):c.a.createElement(h,{goToRegister:function(){r(!0)}}):"")}var j=a(8);var S=function(){return c.a.createElement(j.a,null,c.a.createElement("div",null,c.a.createElement(E.c,null,c.a.createElement(E.a,{path:"/chat",component:v}),c.a.createElement(E.a,{path:"/",component:O}))))};a(41);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.ab5cee39.chunk.js.map